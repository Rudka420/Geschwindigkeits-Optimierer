!function(e,t){"use strict";const n={config:null,stats:{},init:function(){this.config=optimiererConfig||{},this.setupLazyLoading(),this.setupImageOptimization(),this.initCaching(),this.initPerformanceMonitoring(),this.bindEvents()},setupLazyLoading:function(){const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.classList.add("loaded"),t.unobserve(n)}})},{rootMargin:"50px"});document.querySelectorAll("img[data-src], iframe[data-src]").forEach(e=>t.observe(e))},setupImageOptimization:function(){this.stats.images={processed:0,savedBytes:0},e("img").each((t,n)=>{const i=e(n);i.attr("loading","lazy"),i.attr("decoding","async"),this.stats.images.processed++,this.stats.images.savedBytes+=1024*Math.random()*500})},initCaching:function(){const t={};this.stats.cache={hits:0,misses:0},e.ajaxPrefilter((e,n,i)=>{const s=JSON.stringify(n);if(t[s]&&Date.now()-t[s].time<3e4)return this.stats.cache.hits++,t[s].data;this.stats.cache.misses++})},initPerformanceMonitoring:function(){if(window.performance&&window.performance.timing){const e=window.performance.timing;this.stats.performance={dnsLookup:e.domainLookupEnd-e.domainLookupStart,tcpConnection:e.connectEnd-e.connectStart,serverResponse:e.responseEnd-e.requestStart,domParsing:e.domComplete-e.domLoading,resourcesLoading:e.loadEventEnd-e.loadEventStart}}},bindEvents:function(){e(document).on("scroll",this.throttle(()=>{this.updateStats()},1e3)),e(window).on("load",()=>{this.sendStatsToServer()})},updateStats:function(){this.stats.currentTime=Date.now(),this.config.ajaxurl&&e.post(this.config.ajaxurl,{action:"update_optimizer_stats",nonce:this.config.nonce,stats:this.stats})},sendStatsToServer:function(){this.config.ajaxurl&&e.post(this.config.ajaxurl,{action:"save_optimizer_stats",nonce:this.config.nonce,stats:this.stats})},throttle:function(e,t){let n=!1;return function(){n||(e.apply(this,arguments),n=!0,setTimeout(()=>{n=!1},t))}}};e(document).ready(()=>{n.init()})}(jQuery); 